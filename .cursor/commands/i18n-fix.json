{
    "title": "i18n Fix & Sidebar Translation Repair",
    "description": "Scan the repo for missing translations (prioritise sidebar items), replace hardcoded UI strings with translation keys, add missing keys to locale files, and produce patch-ready diffs.",
    "prompt": [
        {
            "role": "user",
            "content": "You are an automated i18n engineer. Your task: find and fix missing translations across the frontend codebase, with priority on sidebar items and navigation labels. Produce patch-ready diffs that replace hardcoded visible strings with the project's translation function and add missing keys to the locale files.\n\nREQUIREMENTS & SCOPE\n1. Scan all frontend files (React/JSX/TSX, templates, components, pages, layout, navigation, sidebar components). Also scan any server-rendered templates that produce UI text.\n2. Prioritise sidebar and navigation labels first (files that render the app sidebar, main nav, header links, footer links). Then scan forms, button labels, modals, table headers, status badges, and toasts.\n3. Detect hardcoded user-facing strings. Exclude technical/log messages, test strings, comments, and content intentionally stored in the database.\n4. For each hardcoded string found:\n   - Suggest a translation key following the project's naming convention. If no convention exists, use `ui.<component>.<purpose>` (example: `sidebar.tickets`, `sidebar.customers`, `ticket.action.delete`).\n   - Replace the hardcoded string in the code with the project's translation call (e.g. `t('sidebar.tickets')` or `i18n.t('sidebar.tickets')`). Use the translation helper already used in the repo; if multiple patterns exist, follow the most common one.\n   - Preserve interpolation and formatting (if the string includes dynamic parts use parameterized keys, e.g. `t('ticket.count', { count })`).\n5. Update locale files (at minimum `en`, and if repo includes other locales like `fr`, `ar`, update those too):\n   - Add the new keys with sensible English values in `en`.\n   - For other locales present, add the key with empty string or a placeholder like `\"\"` and mark as `TODO_TRANSLATE` in a comment if the format supports it.\n6. Keep code behavior unchanged: do not alter logic, layout, or tests except where necessary to wire the translation function. Ensure imports for the translation helper are added when missing.\n7. Add unit/UI tests where feasible: for sidebar items, add a small snapshot or RTL test asserting that the sidebar renders the translation key resolved (or that the component uses the translation function). When tests are not possible automatically, add a TODO comment near the change: `// TODO: add i18n test for sidebar`.\n8. Provide a machine-readable report and patch-ready diffs:\n   - Report JSON must include: total_strings_found, total_replaced, files_modified (list), keys_added (list with key and default English value), skipped_items (explain why skipped), and any manual follow-ups required.\n   - For each file modified include a unified-diff patch in the `patches` array.\n9. Special handling rules:\n   - Sidebar items that are generated from a config object: prefer adding keys to the config instead of hardcoding. If config already contains labels, convert values to keys and update locale files accordingly.\n   - If a hardcoded string is used in multiple locations, create a single shared key and replace all instances.\n   - For dynamic strings including numbers/dates, use parameterized translations and preserve the original variable names.\n   - For small copy fixes (typos) suggest improved copy but do not change meaning without marking as a copy suggestion in the report.\n10. Output format (exact):\n   - Start by printing a single JSON object only (no extra text) with the following shape:\n{\n  \"summary\": { \"total_strings_found\": 0, \"total_replaced\": 0, \"files_modified\": 0 },\n  \"files_modified\": [ { \"path\": \"repo/path/file.tsx\", \"replacements\": [ { \"line\": 10, \"original\": \"Tickets\", \"key\": \"sidebar.tickets\" } ], \"patch\": \"<unified-diff>\" } ],\n  \"keys_added\": [ { \"key\": \"sidebar.tickets\", \"default\": \"Tickets\", \"locales_updated\": [\"en\",\"fr\",\"ar\"] } ],\n  \"skipped\": [ { \"path\": \"...\", \"reason\": \"technical string / database content\" } ],\n  \"notes\": [ \"Any manual steps or conflicts to resolve\" ]\n}\n\n   - After the JSON object, output NOTHING else. No prose, no explanation.\n11. Commit message: when generating patches, use the commit header exactly:\n    `fix(i18n): replace hardcoded UI strings with translation keys (sidebar priority)`\n12. Confidence & safety:\n   - If a replacement is ambiguous (e.g., same string used for two different semantic meanings), do NOT auto-replace: add it to `skipped` with explanation and include an example in `notes` for manual review.\n   - When adding translation imports, prefer local file-level imports (do not alter global imports); if the project uses a custom hook (e.g., `useTranslation()`), follow existing patterns.\n\nRUNNING RULES\n- Do not run git commands; only produce unified-diff patches in the output JSON.\n- Do not modify locale files for languages not present in the repo; only update locales already in the codebase.\n- Keep diffs minimal and focused: one patch per file modified.\n\nDeliver this JSON and the patches now."
        }
    ]
}